{"version":3,"file":"1-timer.js","sources":["../src/js/1-timer.js"],"sourcesContent":["import flatpickr from 'flatpickr';\nimport 'flatpickr/dist/flatpickr.min.css';\n// Описаний у документації\nimport iziToast from 'izitoast';\n// Додатковий імпорт стилів\nimport 'izitoast/dist/css/iziToast.min.css';\nconst erorrMessage = {\n  icon: ``,\n  iconUrl: `../img/alert.png`,\n  iconColor: '#fff',\n  messageColor: `#fff`,\n  color: `#ef4040`,\n  position: `topRight`,\n  class: 'izi-svg',\n  timeout: 5000,\n  imageWidth: 50,\n  theme: `dark`,\n};\nconst options = {\n  enableTime: true,\n  time_24hr: true,\n  defaultDate: new Date(),\n  minuteIncrement: 1,\n  onClose(selectedDates) {\n    isDateValid(selectedDates[0]) ? activateBtn() : disactivateBtn();\n    userSelectedDate = selectedDates[0];\n  },\n};\n//functions\nconst convertMs = ms => {\n  const second = 1000;\n  const minute = second * 60;\n  const hour = minute * 60;\n  const day = hour * 24;\n\n  const days = Math.floor(ms / day);\n  const hours = Math.floor((ms % day) / hour);\n  const minutes = Math.floor(((ms % day) % hour) / minute);\n  const seconds = Math.floor((((ms % day) % hour) % minute) / second);\n\n  return { days, hours, minutes, seconds };\n};\n\nconst activateBtn = () => {\n  if (isActive(btn)) return;\n  btn.active = true;\n  switchBtnStyle();\n};\nconst disactivateBtn = () => {\n  if (!isActive(btn)) return;\n  btn.active = false;\n  switchBtnStyle();\n};\nconst disactivateInput = () => {\n  dateInput.disabled = true;\n  dateInput.classList.add(`input-disable`);\n};\nconst switchBtnStyle = position => {\n  position = position ? position : ``;\n  switch (position.toLowerCase) {\n    case `on`: {\n      btn.classList.add(`is-active`);\n      break;\n    }\n    case `off`: {\n      btn.classList.remove(`is-active`);\n      break;\n    }\n    default: {\n      btn.classList.toggle(`is-active`);\n    }\n  }\n};\n\nconst btnFunc = event => {\n  startTimer(event);\n  disactivateBtn();\n  disactivateInput();\n};\nconst showTimer = () => {\n  let timeLeft = 0;\n  let timeLeftObject = {};\n\n  timeLeft = userSelectedDate.getTime() - Date.now();\n  if (timeLeft > 0) {\n    timeLeftObject = convertMs(timeLeft);\n    days.textContent = String(timeLeftObject.days).padStart(2, '0');\n    hours.textContent = String(timeLeftObject.hours).padStart(2, '0');\n    minutes.textContent = String(timeLeftObject.minutes).padStart(2, '0');\n    seconds.textContent = String(timeLeftObject.seconds).padStart(2, '0');\n  } else return;\n};\nconst startTimer = event => {\n  showTimer();\n  const intervalId = setInterval(showTimer, 1000);\n};\nconst isDateValid = date => {\n  if (date.getTime() <= Date.now()) {\n    buildErrorMessage();\n    return false;\n  }\n  return true;\n};\nconst btnClick = event => {\n  event.preventDefault();\n  isActive(event.currentTarget)\n    ? btnFunc()\n    : !dateInput.disabled\n    ? buildErrorMessage()\n    : buildErrorMessage(`Wait please for timer finish`);\n};\nconst buildErrorMessage = message => {\n  erorrMessage.message = message ?? `Please choose a date in the future`;\n  iziToast.show(erorrMessage);\n};\n\nconst isActive = elem => elem.active ?? false;\n\n//Body\nconst dateInput = document.querySelector(`#datetime-picker`);\nconst calendar = flatpickr(dateInput, options);\nconst btn = document.querySelector(`[data-start]`);\nconst timer = document.querySelector(`.timer`);\nconst days = timer.querySelector(`[data-days]`);\nconst hours = timer.querySelector(`[data-hours]`);\nconst minutes = timer.querySelector(`[data-minutes]`);\nconst seconds = timer.querySelector(`[data-seconds]`);\nlet userSelectedDate = ``;\n\nbtn.addEventListener(`click`, event => btnClick(event));\n"],"names":["erorrMessage","options","selectedDates","isDateValid","activateBtn","disactivateBtn","userSelectedDate","convertMs","ms","days","hours","minutes","seconds","isActive","btn","switchBtnStyle","disactivateInput","dateInput","position","btnFunc","event","startTimer","showTimer","timeLeft","timeLeftObject","date","buildErrorMessage","btnClick","message","iziToast","elem","flatpickr","timer"],"mappings":"2FAMA,MAAMA,EAAe,CACnB,KAAM,GACN,QAAS,mBACT,UAAW,OACX,aAAc,OACd,MAAO,UACP,SAAU,WACV,MAAO,UACP,QAAS,IACT,WAAY,GACZ,MAAO,MACT,EACMC,EAAU,CACd,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,QAAQC,EAAe,CACrBC,EAAYD,EAAc,CAAC,CAAC,EAAIE,EAAW,EAAKC,IAChDC,EAAmBJ,EAAc,CAAC,CACnC,CACH,EAEMK,EAAYC,GAAM,CAMtB,MAAMC,EAAO,KAAK,MAAMD,EAAK,KAAG,EAC1BE,EAAQ,KAAK,MAAOF,EAAK,MAAO,IAAI,EACpCG,EAAU,KAAK,MAAQH,EAAK,MAAO,KAAQ,GAAM,EACjDI,EAAU,KAAK,MAASJ,EAAK,MAAO,KAAQ,IAAU,GAAM,EAElE,MAAO,CAAE,KAAAC,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,CACxC,EAEMR,EAAc,IAAM,CACpBS,EAASC,CAAG,IAChBA,EAAI,OAAS,GACbC,IACF,EACMV,EAAiB,IAAM,CACtBQ,EAASC,CAAG,IACjBA,EAAI,OAAS,GACbC,IACF,EACMC,EAAmB,IAAM,CAC7BC,EAAU,SAAW,GACrBA,EAAU,UAAU,IAAI,eAAe,CACzC,EACMF,EAAiBG,GAAY,CAEjC,OADAA,EAAWA,GAAsB,GACzBA,EAAS,YAAW,CAC1B,IAAK,KAAM,CACTJ,EAAI,UAAU,IAAI,WAAW,EAC7B,KACD,CACD,IAAK,MAAO,CACVA,EAAI,UAAU,OAAO,WAAW,EAChC,KACD,CACD,QACEA,EAAI,UAAU,OAAO,WAAW,CAEnC,CACH,EAEMK,EAAUC,GAAS,CACvBC,EAAgB,EAChBhB,IACAW,GACF,EACMM,EAAY,IAAM,CACtB,IAAIC,EAAW,EACXC,EAAiB,CAAA,EAGrB,GADAD,EAAWjB,EAAiB,QAAS,EAAG,KAAK,IAAG,EAC5CiB,EAAW,EACbC,EAAiBjB,EAAUgB,CAAQ,EACnCd,EAAK,YAAc,OAAOe,EAAe,IAAI,EAAE,SAAS,EAAG,GAAG,EAC9Dd,EAAM,YAAc,OAAOc,EAAe,KAAK,EAAE,SAAS,EAAG,GAAG,EAChEb,EAAQ,YAAc,OAAOa,EAAe,OAAO,EAAE,SAAS,EAAG,GAAG,EACpEZ,EAAQ,YAAc,OAAOY,EAAe,OAAO,EAAE,SAAS,EAAG,GAAG,MAC/D,OACT,EACMH,EAAaD,GAAS,CAC1BE,IACmB,YAAYA,EAAW,GAAI,CAChD,EACMnB,EAAcsB,GACdA,EAAK,QAAO,GAAM,KAAK,IAAG,GAC5BC,IACO,IAEF,GAEHC,EAAWP,GAAS,CACxBA,EAAM,eAAc,EACpBP,EAASO,EAAM,aAAa,EACxBD,EAAS,EACRF,EAAU,SAEXS,EAAkB,8BAA8B,EADhDA,EAAmB,CAEzB,EACMA,EAAoBE,GAAW,CACnC5B,EAAa,QAAU4B,GAAW,qCAClCC,EAAS,KAAK7B,CAAY,CAC5B,EAEMa,EAAWiB,GAAQA,EAAK,QAAU,GAGlCb,EAAY,SAAS,cAAc,kBAAkB,EAC1Cc,EAAUd,EAAWhB,CAAO,EAC7C,MAAMa,EAAM,SAAS,cAAc,cAAc,EAC3CkB,EAAQ,SAAS,cAAc,QAAQ,EACvCvB,EAAOuB,EAAM,cAAc,aAAa,EACxCtB,EAAQsB,EAAM,cAAc,cAAc,EAC1CrB,EAAUqB,EAAM,cAAc,gBAAgB,EAC9CpB,EAAUoB,EAAM,cAAc,gBAAgB,EACpD,IAAI1B,EAAmB,GAEvBQ,EAAI,iBAAiB,QAASM,GAASO,EAASP,CAAK,CAAC"}