{"version":3,"file":"1-timer.js","sources":["../src/js/1-timer.js"],"sourcesContent":["import flatpickr from 'flatpickr';\nimport 'flatpickr/dist/flatpickr.min.css';\n// Описаний у документації\nimport iziToast from 'izitoast';\n// Додатковий імпорт стилів\nimport 'izitoast/dist/css/iziToast.min.css';\nconst erorrMessage = {\n  icon: ``,\n  iconUrl: `../img/alert.png`,\n  iconColor: '#fff',\n  messageColor: `#fff`,\n  color: `#ef4040`,\n  position: `topRight`,\n  class: 'izi-svg',\n  timeout: 5000,\n  imageWidth: 50,\n  theme: `dark`,\n};\nconst options = {\n  enableTime: true,\n  time_24hr: true,\n  defaultDate: new Date(),\n  minuteIncrement: 1,\n  onClose(selectedDates) {\n    if (isDateValid(selectedDates[0])) {\n      activateBtn();\n      userSelectedDate = selectedDates[0];\n    } else {\n      disactivateBtn();\n    }\n  },\n};\n//functions\nconst convertMs = ms => {\n  const second = 1000;\n  const minute = second * 60;\n  const hour = minute * 60;\n  const day = hour * 24;\n\n  const days = Math.floor(ms / day);\n  const hours = Math.floor((ms % day) / hour);\n  const minutes = Math.floor(((ms % day) % hour) / minute);\n  const seconds = Math.floor((((ms % day) % hour) % minute) / second);\n\n  return { days, hours, minutes, seconds };\n};\n\nconst activateBtn = () => {\n  if (isBtnActive) return;\n  isBtnActive = true;\n  switchBtnStyle(`on`);\n};\nconst disactivateBtn = () => {\n  if (!isBtnActive) return;\n  isBtnActive = false;\n  switchBtnStyle(`off`);\n};\nconst disactivateInput = () => {\n  dateInput.disabled = true;\n  dateInput.classList.add(`input-disable`);\n};\nconst activateInput = () => {\n  dateInput.disabled = false;\n  dateInput.classList.remove(`input-disable`);\n};\n\nconst switchBtnStyle = position => {\n  position = position ? position : ``;\n\n  switch (position.toLowerCase()) {\n    case `on`: {\n      btn.classList.add(`is-active`);\n      break;\n    }\n    case `off`: {\n      btn.classList.remove(`is-active`);\n      break;\n    }\n    default: {\n      btn.classList.toggle(`is-active`);\n    }\n  }\n};\n\nconst btnFunc = event => {\n  startTimer(event);\n\n  disactivateBtn();\n  disactivateInput();\n};\n\nconst showTimer = () => {\n  let timeLeft = 0;\n  let timeLeftObject = {};\n\n  timeLeft = userSelectedDate.getTime() - Date.now();\n  if (timeLeft > 0) {\n    timeLeftObject = convertMs(timeLeft);\n    days.textContent = String(timeLeftObject.days).padStart(2, '0');\n    hours.textContent = String(timeLeftObject.hours).padStart(2, '0');\n    minutes.textContent = String(timeLeftObject.minutes).padStart(2, '0');\n    seconds.textContent = String(timeLeftObject.seconds).padStart(2, '0');\n  } else {\n    stopTimer();\n    return;\n  }\n  console.log(intervalId);\n};\n\nconst startTimer = event => {\n  showTimer();\n  intervalId = setInterval(showTimer, 1000);\n};\n\nconst stopTimer = () => {\n  activateInput();\n  clearInterval(intervalId);\n};\n\nconst isDateValid = date => {\n  if (date.getTime() <= Date.now()) {\n    buildErrorMessage();\n    return false;\n  }\n  return true;\n};\n\nconst btnClick = event => {\n  event.preventDefault();\n  isBtnActive\n    ? btnFunc()\n    : !dateInput.disabled\n    ? buildErrorMessage()\n    : buildErrorMessage(`Wait please for timer finish`);\n};\n\nconst buildErrorMessage = message => {\n  erorrMessage.message = message ?? `Please choose a date in the future`;\n  iziToast.show(erorrMessage);\n};\n\n//Body\nlet isBtnActive = false;\nconst dateInput = document.querySelector(`#datetime-picker`);\nconst calendar = flatpickr(dateInput, options);\nconst btn = document.querySelector(`[data-start]`);\nconst timer = document.querySelector(`.timer`);\nconst days = timer.querySelector(`[data-days]`);\nconst hours = timer.querySelector(`[data-hours]`);\nconst minutes = timer.querySelector(`[data-minutes]`);\nconst seconds = timer.querySelector(`[data-seconds]`);\nlet userSelectedDate = ``;\nlet intervalId;\nbtn.addEventListener(`click`, event => btnClick(event));\n"],"names":["erorrMessage","options","selectedDates","isDateValid","activateBtn","userSelectedDate","disactivateBtn","convertMs","ms","days","hours","minutes","seconds","isBtnActive","switchBtnStyle","disactivateInput","dateInput","activateInput","position","btn","btnFunc","event","startTimer","showTimer","timeLeft","timeLeftObject","stopTimer","intervalId","date","buildErrorMessage","btnClick","message","iziToast","flatpickr","timer"],"mappings":"2FAMA,MAAMA,EAAe,CACnB,KAAM,GACN,QAAS,mBACT,UAAW,OACX,aAAc,OACd,MAAO,UACP,SAAU,WACV,MAAO,UACP,QAAS,IACT,WAAY,GACZ,MAAO,MACT,EACMC,EAAU,CACd,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,QAAQC,EAAe,CACjBC,EAAYD,EAAc,CAAC,CAAC,GAC9BE,IACAC,EAAmBH,EAAc,CAAC,GAElCI,GAEH,CACH,EAEMC,EAAYC,GAAM,CAMtB,MAAMC,EAAO,KAAK,MAAMD,EAAK,KAAG,EAC1BE,EAAQ,KAAK,MAAOF,EAAK,MAAO,IAAI,EACpCG,EAAU,KAAK,MAAQH,EAAK,MAAO,KAAQ,GAAM,EACjDI,EAAU,KAAK,MAASJ,EAAK,MAAO,KAAQ,IAAU,GAAM,EAElE,MAAO,CAAE,KAAAC,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,CACxC,EAEMR,EAAc,IAAM,CACpBS,IACJA,EAAc,GACdC,EAAe,IAAI,EACrB,EACMR,EAAiB,IAAM,CACtBO,IACLA,EAAc,GACdC,EAAe,KAAK,EACtB,EACMC,EAAmB,IAAM,CAC7BC,EAAU,SAAW,GACrBA,EAAU,UAAU,IAAI,eAAe,CACzC,EACMC,EAAgB,IAAM,CAC1BD,EAAU,SAAW,GACrBA,EAAU,UAAU,OAAO,eAAe,CAC5C,EAEMF,EAAiBI,GAAY,CAGjC,OAFAA,EAAWA,GAAsB,GAEzBA,EAAS,YAAa,EAAA,CAC5B,IAAK,KAAM,CACTC,EAAI,UAAU,IAAI,WAAW,EAC7B,KACD,CACD,IAAK,MAAO,CACVA,EAAI,UAAU,OAAO,WAAW,EAChC,KACD,CACD,QACEA,EAAI,UAAU,OAAO,WAAW,CAEnC,CACH,EAEMC,EAAUC,GAAS,CACvBC,EAAgB,EAEhBhB,IACAS,GACF,EAEMQ,EAAY,IAAM,CACtB,IAAIC,EAAW,EACXC,EAAiB,CAAA,EAGrB,GADAD,EAAWnB,EAAiB,QAAS,EAAG,KAAK,IAAG,EAC5CmB,EAAW,EACbC,EAAiBlB,EAAUiB,CAAQ,EACnCf,EAAK,YAAc,OAAOgB,EAAe,IAAI,EAAE,SAAS,EAAG,GAAG,EAC9Df,EAAM,YAAc,OAAOe,EAAe,KAAK,EAAE,SAAS,EAAG,GAAG,EAChEd,EAAQ,YAAc,OAAOc,EAAe,OAAO,EAAE,SAAS,EAAG,GAAG,EACpEb,EAAQ,YAAc,OAAOa,EAAe,OAAO,EAAE,SAAS,EAAG,GAAG,MAC/D,CACLC,IACA,MACD,CACD,QAAQ,IAAIC,CAAU,CACxB,EAEML,EAAaD,GAAS,CAC1BE,IACAI,EAAa,YAAYJ,EAAW,GAAI,CAC1C,EAEMG,EAAY,IAAM,CACtBT,IACA,cAAcU,CAAU,CAC1B,EAEMxB,EAAcyB,GACdA,EAAK,QAAO,GAAM,KAAK,IAAG,GAC5BC,IACO,IAEF,GAGHC,EAAWT,GAAS,CACxBA,EAAM,eAAc,EACpBR,EACIO,EAAS,EACRJ,EAAU,SAEXa,EAAkB,8BAA8B,EADhDA,EAAmB,CAEzB,EAEMA,EAAoBE,GAAW,CACnC/B,EAAa,QAAU+B,GAAW,qCAClCC,EAAS,KAAKhC,CAAY,CAC5B,EAGA,IAAIa,EAAc,GAClB,MAAMG,EAAY,SAAS,cAAc,kBAAkB,EAC1CiB,EAAUjB,EAAWf,CAAO,EAC7C,MAAMkB,EAAM,SAAS,cAAc,cAAc,EAC3Ce,EAAQ,SAAS,cAAc,QAAQ,EACvCzB,EAAOyB,EAAM,cAAc,aAAa,EACxCxB,EAAQwB,EAAM,cAAc,cAAc,EAC1CvB,EAAUuB,EAAM,cAAc,gBAAgB,EAC9CtB,EAAUsB,EAAM,cAAc,gBAAgB,EACpD,IAAI7B,EAAmB,GACnBsB,EACJR,EAAI,iBAAiB,QAASE,GAASS,EAAST,CAAK,CAAC"}